{"version":3,"sources":["42672108_2031052090251354_8552365379190521856_o.jpg","Dashboard.js","Login.js","Footer.js","App.js","index.js"],"names":["module","exports","Dashboard","className","Login","getUser","a","axios","get","headers","Authorization","state","params","access_token","response","setState","user","data","display_name","getTrack","id","track","getSongData","catch","error","console","log","key","mode","tempo","time_sig","time_signature","getCurrentPlay","item","handleChange","event","preventDefault","input","target","value","getHashParams","e","hashParams","r","q","window","location","hash","substring","exec","decodeURIComponent","this","numberValue","href","name","autoComplete","type","onChange","onClick","slice","style","fontSize","color","src","album","images","url","alt","width","maxWidth","artists","keyFinder","Component","Footer","App","backgroundImage","require","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.182073c6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/42672108_2031052090251354_8552365379190521856_o.49297da4.jpg\";","import React from \"react\";\n\nexport default function Dashboard() {\n  return (\n    <div className='dashboard'>\n      <nav>Song Key</nav>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport InputForm from \"./InputForm\";\n\nclass Login extends Component {\n  constructor() {\n    super();\n\n    const params = this.getHashParams();\n    this.state = {};\n    this.state.params = params;\n    this.state.user = \"\";\n    this.state.error = \"\";\n  }\n  getHashParams() {\n    var hashParams = {};\n    var e,\n      r = /([^&;=]+)=?([^&;]*)/g,\n      q = window.location.hash.substring(1);\n    e = r.exec(q);\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n    return hashParams;\n  }\n\n  componentDidMount() {\n    this.getUser();\n  }\n\n  getUser = async () => {\n    const response = await axios.get(`https://api.spotify.com/v1/me`, {\n      headers: {\n        Authorization: \"Bearer \" + this.state.params.access_token,\n      },\n    });\n    this.setState({ ...this.state, user: response.data.display_name });\n  };\n\n  getTrack = async (id) => {\n    const response = await axios.get(\n      `https://api.spotify.com/v1/tracks/${id}`,\n      {\n        headers: {\n          Authorization: \"Bearer \" + this.state.params.access_token,\n        },\n      }\n    );\n\n    this.setState({ ...this.state, track: response.data });\n  };\n\n  getSongData = async (id) => {\n    const response = await axios\n      .get(`https://api.spotify.com/v1/audio-analysis/${id}`, {\n        headers: {\n          Authorization: \"Bearer \" + this.state.params.access_token,\n        },\n      })\n      .catch((error) => {\n        console.log(\"fry\");\n        this.setState({ ...this.state, error: \"Not a valid URI.\" });\n      });\n\n    if (response) {\n      this.setState({\n        ...this.state,\n        key: response.data.track.key,\n        mode: response.data.track.mode,\n        tempo: response.data.track.tempo,\n        time_sig: response.data.track.time_signature,\n        error: \"\",\n      });\n    }\n  };\n\n  getCurrentPlay = async () => {\n    const response = await axios.get(\n      `https://api.spotify.com/v1/me/player/currently-playing`,\n      {\n        headers: {\n          Authorization: \"Bearer \" + this.state.params.access_token,\n        },\n      }\n    );\n    // this.setState({ ...this.state, input: response.data });\n    if (response.data) {\n      const id = response.data.item.id;\n      console.log(response.data.item.id);\n      this.getSongData(id);\n      this.getTrack(id);\n    } else {\n      this.setState({\n        ...this.state,\n        error:\n          \"Nothing is currently playing. Press play on one of your Spotify devices.\",\n      });\n    }\n  };\n\n  handleChange = (event) => {\n    event.preventDefault();\n    this.setState({ ...this.state, input: event.target.value });\n  };\n\n  keyFinder(numberValue) {\n    let key = \"\";\n    switch (numberValue) {\n      case 0:\n        key = \"C\";\n        break;\n      case 1:\n        key = \"C#\";\n        break;\n      case 2:\n        key = \"D\";\n        break;\n      case 3:\n        key = \"D#\";\n        break;\n      case 4:\n        key = \"E\";\n        break;\n      case 5:\n        key = \"F\";\n        break;\n      case 6:\n        key = \"F#\";\n        break;\n      case 7:\n        key = \"G\";\n        break;\n      case 8:\n        key = \"G#\";\n        break;\n      case 9:\n        key = \"A\";\n        break;\n      case 10:\n        key = \"A#\";\n        break;\n      case 11:\n        key = \"B\";\n        break;\n      default:\n        key = \"\";\n    }\n    return key;\n  }\n\n  render() {\n    return (\n      <div className='login'>\n        <div className='a'>\n          <div className='a-fade'>\n            <div>\n              <div className='header-description'>\n                {\" \"}\n                Find the key, tempo, and time signature of any song on Spotify.\n                <br></br>\n              </div>\n\n              {this.state.user ? (\n                <div className='login-block'>\n                  <div className='login-title'>\n                    Logged in as {this.state.user}\n                  </div>\n                  <a className='go-button' href='#section2'>\n                    Give it a go\n                  </a>\n                </div>\n              ) : (\n                <div className='login-block'>\n                  <div className='login-title'>\n                    Login with your Spotify account to get started.\n                  </div>\n                  <a href='http://localhost:8888'> Login to Spotify </a>\n                </div>\n              )}\n            </div>\n            {/* <p></p> */}\n          </div>\n          <section id='section2'></section>\n        </div>\n        <div className='c'>\n          {this.state.user ? (\n            <div className='search-box'>\n              <form>\n                <label>Enter Spotify URI:</label>\n                <input\n                  name='song id'\n                  autoComplete='off'\n                  type='text'\n                  value={this.state.input}\n                  onChange={(event) => this.handleChange(event)}\n                ></input>\n              </form>\n\n              <button\n                onClick={() => {\n                  if (this.state.input) {\n                    this.setState({ ...this.state, error: \"\" });\n                    this.getSongData(this.state.input.slice(14, 36));\n                    this.getTrack(this.state.input.slice(14, 36));\n                    this.setState({ ...this.state, input: \"\" });\n                  } else {\n                    this.setState({ ...this.state, error: \"Enter a URI.\" });\n                  }\n                }}\n              >\n                Enter\n              </button>\n              <div>or</div>\n              <button onClick={() => this.getCurrentPlay()}>\n                Get Currently Playing\n              </button>\n              <p style={{ fontSize: \"0.5rem\", color: \"red\" }}>\n                {this.state.error}\n              </p>\n            </div>\n          ) : (\n            <div></div>\n          )}\n        </div>\n\n        {this.state.user && this.state.track && (\n          <div className='d'>\n            {this.state.track && (\n              <div className='track-info'>\n                <img\n                  src={this.state.track.album.images[0].url}\n                  alt='album art'\n                  style={{ width: \"300px\", maxWidth: \"100%\" }}\n                ></img>\n                <div>\n                  <b>{this.state.track.artists[0].name}</b>\n                </div>\n                <div>{this.state.track.name}</div>\n              </div>\n            )}\n            <div className='track-data'>\n              <div>\n                <h2>Key:</h2>\n                <div className='key'>\n                  {this.keyFinder(this.state.key)}\n                  {this.state.mode === 1 && \"maj\"}\n                  {this.state.mode === 0 && \"m\"}\n                </div>\n              </div>\n\n              <div>\n                <h2>BPM:</h2>\n                <div className='key'>{this.state.tempo}</div>\n              </div>\n              <div>\n                <h2>Time Sig:</h2>\n                <div className='key'>{this.state.time_sig}/4</div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React from \"react\";\n\nexport default function Footer() {\n  return (\n    <div className='footer'>\n      <p>Made with love in Vancouver/London.</p>\n      <p>Oskar Wroz 2020</p>\n    </div>\n  );\n}\n","import React from \"react\";\nimport \"./styles.css\";\nimport Dashboard from \"./Dashboard\";\nimport Login from \"./Login\";\nimport Footer from \"./Footer\";\n\nfunction App() {\n  return (\n    <div\n      className='App'\n      style={{\n        backgroundImage: `url(${require(\"/Users/oskarwroz/Documents/WebDev-Projects/key-finder/src/42672108_2031052090251354_8552365379190521856_o.jpg\")})`,\n      }}\n    >\n      <Dashboard />\n      <Login />\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}